---
import { Image } from 'astro:assets';
import type { Project } from '../pages/projects/projects';
import { kFormatter } from '../utils';
import GithubWhite from '@src/assets/img/github-mark-white.svg';
import GithubBlack from '@src/assets/img/github-mark.svg';

const { projects } = Astro.props;
---

<div class='grid grid-cols-12 gap-4'>
	{
		projects.map((project: Project) => (
			<div class='col-span-12 sm:col-span-6 lg:col-span-4 border border-earth-300 dark:border-earth-800 rounded-lg hover:border-earth-400 dark:hover:border-earth-600 transition-colors p-5 bg-earth-50/50 dark:bg-earth-900/50'>
				<div class='flex justify-between items-center mb-3'>
					<div class='flex gap-2'>
						{(project.tags || [])?.map((tag: string) => (
							<span
								class='text-xs text-earth-500 dark:text-earth-400 font-mono'>
								{tag}
							</span>
						))}
					</div>

					{project.stargazers_count !== undefined && (
						<div class='shrink-0'>
							<a
								href={project.html_url}
								target='_blank'
								class='text-xs text-earth-500 dark:text-earth-400 hover:text-earth-700 dark:hover:text-earth-200 transition-colors flex items-center gap-1 font-mono'>
								<Image src={GithubBlack} height={12} class='dark:hidden' alt='Github stars' />
								<Image src={GithubWhite} height={12} class='hidden dark:block' alt='Github stars' />
								{kFormatter(project.stargazers_count)}
							</a>
						</div>
					)}
				</div>
				<h3 class='font-semibold text-base mb-2 text-earth-900 dark:text-earth-100'>
					<a class='hover:text-earth-600 dark:hover:text-earth-300 transition-colors' href={project.demoLink} target='_blank' rel={project.demoLinkRel}>
						{project.name}
					</a>
				</h3>
				<div class='line-clamp-2 text-sm text-earth-600 dark:text-earth-300 mb-4 min-h-[40px]'>
					<p>{project.description}</p>
				</div>
				<div class='flex gap-4 text-sm font-mono'>
					{project.postLink && (
						<a class='text-earth-500 dark:text-earth-400 hover:text-earth-700 dark:hover:text-earth-200 transition-colors' href={project.postLink}>
							Article →
						</a>
					)}
					{project.demoLink && (
						<a class='text-earth-500 dark:text-earth-400 hover:text-earth-700 dark:hover:text-earth-200 transition-colors' href={project.demoLink} target='_blank' rel={project.demoLinkRel}>
							Demo →
						</a>
					)}
				</div>
			</div>
		))
	}
</div>
