---
import { SITE_TITLE, SITE_TAGLINE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';
import { projects } from './projects/projects';
import ProjectList from '../components/ProjectList.astro';
import PostItem from '../components/PostItem.astro';

type BlogPost = CollectionEntry<'blog'>;

const top3Projects = projects.slice(0, 3);
const posts = (await getCollection('blog'))
	.sort((a: BlogPost, b: BlogPost) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 5);
---

<BaseLayout title={SITE_TITLE + ' - ' + SITE_TAGLINE} description={SITE_DESCRIPTION}>
	<div class='container'>
		<div class='w-full mb-16 md:mb-24 pt-8 md:pt-16'>
			<div class='max-w-3xl'>
				<h1 class='text-3xl md:text-4xl lg:text-5xl font-semibold mb-6 leading-tight font-mono text-earth-900 dark:text-earth-100'>
					Hi, I'm Phanuphat (Oad)
				</h1>
				<div class='text-base md:text-lg leading-relaxed text-earth-700 dark:text-earth-300'>
					<p class='mb-4'>
						I am an astronomy olympiad medalist turned CS student at NUS. I got into programming through AI research in high school, but
						these days I'm more interested in systems engineering, networking, and parallel computing. I also love building software that
						makes everyday tasks more enjoyable. ðŸ˜Š
					</p>
					<p>
						Beyond academics, I enjoy building simple yet powerful software that makes everyday tasks a little more intuitive, efficient,
						and enjoyable (hopefully).
					</p>
				</div>
			</div>
		</div>
		<main>
			<div class='mb-16 md:mb-24'>
				<div class='flex items-baseline justify-between mb-6'>
					<h2 class='text-xl md:text-2xl font-semibold font-mono text-earth-900 dark:text-earth-100'>Recent Posts</h2>
					<a
						href='/posts/'
						class='text-sm text-earth-500 dark:text-earth-400 hover:text-earth-700 dark:hover:text-earth-200 transition-colors'
						>View all â†’</a
					>
				</div>
				<div>
					{posts.map((post: BlogPost) => <PostItem post={post} />)}
				</div>
			</div>
			<div>
				<div class='flex items-baseline justify-between mb-6'>
					<h2 class='text-xl md:text-2xl font-semibold font-mono text-earth-900 dark:text-earth-100'>Projects</h2>
					<a
						href='/projects/'
						class='text-sm text-earth-500 dark:text-earth-400 hover:text-earth-700 dark:hover:text-earth-200 transition-colors'
						>View all â†’</a
					>
				</div>
				<ProjectList projects={top3Projects} />
			</div>
		</main>
	</div>
</BaseLayout>
